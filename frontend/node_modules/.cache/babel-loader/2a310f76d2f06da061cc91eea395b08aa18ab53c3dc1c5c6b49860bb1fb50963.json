{"ast":null,"code":"var _jsxFileName = \"C:\\\\hackathon\\\\frontend\\\\src\\\\components\\\\RevocationPanel.js\",\n  _s = $RefreshSig$();\nimport React, { useEffect, useState } from 'react';\nimport { listCredentials, revokeCredential } from '../api';\nimport { jsxDEV as _jsxDEV, Fragment as _Fragment } from \"react/jsx-dev-runtime\";\nexport default function RevocationPanel() {\n  _s();\n  const [creds, setCreds] = useState([]);\n  const [loading, setLoading] = useState(false);\n  const [busyId, setBusyId] = useState(null);\n  async function fetchCreds() {\n    setLoading(true);\n    try {\n      const data = await listCredentials();\n      setCreds(data || []);\n    } catch (err) {\n      console.error('Failed to list credentials', err);\n      alert('Error fetching credentials. Check backend.');\n    } finally {\n      setLoading(false);\n    }\n  }\n  useEffect(() => {\n    fetchCreds();\n  }, []);\n  async function handleRevoke(id) {\n    if (!confirm('Revoke credential ' + id + ' ?')) return;\n    try {\n      setBusyId(id);\n      const r = await revokeCredential(id);\n      if (r && r.status === 'revoked') {\n        // re-fetch the credentials to reflect actual backend state\n        await fetchCreds();\n        alert('Credential revoked: ' + id);\n      } else {\n        alert('Revoke failed: ' + (r && r.error ? r.error : 'unknown'));\n      }\n    } catch (err) {\n      console.error('Revoke error', err);\n      alert('Error revoking credential. Check backend.');\n    } finally {\n      setBusyId(null);\n    }\n  }\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: \"card p-3\",\n    children: [/*#__PURE__*/_jsxDEV(\"h5\", {\n      children: \"Revocation Panel\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 46,\n      columnNumber: 7\n    }, this), loading ? /*#__PURE__*/_jsxDEV(\"div\", {\n      children: \"Loading credentials...\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 48,\n      columnNumber: 18\n    }, this) : /*#__PURE__*/_jsxDEV(_Fragment, {\n      children: [creds.length === 0 ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"No credentials issued yet.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 50,\n        columnNumber: 33\n      }, this) : null, /*#__PURE__*/_jsxDEV(\"ul\", {\n        className: \"list-unstyled\",\n        children: creds.map(c => /*#__PURE__*/_jsxDEV(\"li\", {\n          style: {\n            marginBottom: 8\n          },\n          children: [/*#__PURE__*/_jsxDEV(\"strong\", {\n            children: c.id\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 54,\n            columnNumber: 17\n          }, this), ' - ', /*#__PURE__*/_jsxDEV(\"span\", {\n            children: c.revoked ? /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: 'red'\n              },\n              children: \"REVOKED\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 36\n            }, this) : /*#__PURE__*/_jsxDEV(\"span\", {\n              style: {\n                color: 'green'\n              },\n              children: \"VALID\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 56,\n              columnNumber: 81\n            }, this)\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 56,\n            columnNumber: 17\n          }, this), /*#__PURE__*/_jsxDEV(\"button\", {\n            className: \"btn btn-sm btn-danger ms-2\",\n            onClick: () => handleRevoke(c.id),\n            disabled: c.revoked || busyId === c.id,\n            style: {\n              marginLeft: 12\n            },\n            children: busyId === c.id ? 'Working...' : c.revoked ? 'Revoked' : 'Revoke'\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 57,\n            columnNumber: 17\n          }, this)]\n        }, c.id, true, {\n          fileName: _jsxFileName,\n          lineNumber: 53,\n          columnNumber: 15\n        }, this))\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 51,\n        columnNumber: 11\n      }, this)]\n    }, void 0, true)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 45,\n    columnNumber: 5\n  }, this);\n}\n_s(RevocationPanel, \"LmobADT9ddFAn1A6dUelopWWkyg=\");\n_c = RevocationPanel;\nvar _c;\n$RefreshReg$(_c, \"RevocationPanel\");","map":{"version":3,"names":["React","useEffect","useState","listCredentials","revokeCredential","jsxDEV","_jsxDEV","Fragment","_Fragment","RevocationPanel","_s","creds","setCreds","loading","setLoading","busyId","setBusyId","fetchCreds","data","err","console","error","alert","handleRevoke","id","confirm","r","status","className","children","fileName","_jsxFileName","lineNumber","columnNumber","length","map","c","style","marginBottom","revoked","color","onClick","disabled","marginLeft","_c","$RefreshReg$"],"sources":["C:/hackathon/frontend/src/components/RevocationPanel.js"],"sourcesContent":["import React, { useEffect, useState } from 'react'\r\nimport { listCredentials, revokeCredential } from '../api'\r\n\r\nexport default function RevocationPanel(){\r\n  const [creds, setCreds] = useState([])\r\n  const [loading, setLoading] = useState(false)\r\n  const [busyId, setBusyId] = useState(null)\r\n\r\n  async function fetchCreds(){\r\n    setLoading(true)\r\n    try {\r\n      const data = await listCredentials()\r\n      setCreds(data || [])\r\n    } catch(err){\r\n      console.error('Failed to list credentials', err)\r\n      alert('Error fetching credentials. Check backend.')\r\n    } finally {\r\n      setLoading(false)\r\n    }\r\n  }\r\n\r\n  useEffect(()=>{ fetchCreds() },[])\r\n\r\n  async function handleRevoke(id){\r\n    if(!confirm('Revoke credential ' + id + ' ?')) return\r\n    try {\r\n      setBusyId(id)\r\n      const r = await revokeCredential(id)\r\n      if(r && r.status === 'revoked'){\r\n        // re-fetch the credentials to reflect actual backend state\r\n        await fetchCreds()\r\n        alert('Credential revoked: ' + id)\r\n      } else {\r\n        alert('Revoke failed: ' + (r && r.error ? r.error : 'unknown'))\r\n      }\r\n    } catch(err){\r\n      console.error('Revoke error', err)\r\n      alert('Error revoking credential. Check backend.')\r\n    } finally {\r\n      setBusyId(null)\r\n    }\r\n  }\r\n\r\n  return (\r\n    <div className=\"card p-3\">\r\n      <h5>Revocation Panel</h5>\r\n\r\n      {loading ? <div>Loading credentials...</div> : (\r\n        <>\r\n          {creds.length === 0 ? <div>No credentials issued yet.</div> : null}\r\n          <ul className=\"list-unstyled\">\r\n            {creds.map(c => (\r\n              <li key={c.id} style={{marginBottom:8}}>\r\n                <strong>{c.id}</strong>\r\n                {' - '}\r\n                <span>{c.revoked ? <span style={{color:'red'}}>REVOKED</span> : <span style={{color:'green'}}>VALID</span>}</span>\r\n                <button\r\n                  className=\"btn btn-sm btn-danger ms-2\"\r\n                  onClick={() => handleRevoke(c.id)}\r\n                  disabled={c.revoked || busyId === c.id}\r\n                  style={{marginLeft:12}}\r\n                >\r\n                  { busyId === c.id ? 'Working...' : (c.revoked ? 'Revoked' : 'Revoke') }\r\n                </button>\r\n              </li>\r\n            ))}\r\n          </ul>\r\n        </>\r\n      )}\r\n    </div>\r\n  )\r\n}\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}